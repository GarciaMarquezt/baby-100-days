<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å®å®æˆé•¿ç›¸å†Œ - ä¸¥å±¹ç›</title>
    <link rel="stylesheet" href="style.css">
    <!-- å¼•å…¥ Fancybox ç”¨äºå›¾ç‰‡ç‚¹å‡»æ”¾å¤§ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css"/>
    
    <style>
        body {
            background-color: #fff5f5;
            min-height: 100vh;
            padding: 0;
        }
        .gallery-container {
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        .back-btn {
            display: inline-block;
            margin-bottom: 20px;
            padding: 8px 15px;
            background: #fff;
            border-radius: 20px;
            text-decoration: none;
            color: #d32f2f;
            font-size: 0.9rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .section-title {
            color: #d32f2f;
            margin: 20px 0 10px;
            border-left: 4px solid #d32f2f;
            padding-left: 10px;
            font-size: 1.2rem;
        }

        /* ç€‘å¸ƒæµ/ç½‘æ ¼å¸ƒå±€ */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* ä¸¤åˆ—æ˜¾ç¤º */
            gap: 10px;
        }
        
        .gallery-item {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            background: #fff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            aspect-ratio: 1 / 1; /* æ­£æ–¹å½¢ç¼©ç•¥å›¾ */
        }
        
        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            transition: transform 0.3s;
        }
        
        /* è§†é¢‘æ’­æ”¾å›¾æ ‡ */
        .video-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem;
            color: rgba(255,255,255,0.9);
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            pointer-events: none;
        }

        /* è§†é¢‘å®¹å™¨ */
        .video-container {
            margin-bottom: 30px;
        }
        .video-wrapper {
            background: #000;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .video-wrapper video {
            width: 100%;
            display: block;
        }
        .video-caption {
            padding: 10px;
            background: #fff;
            color: #666;
            font-size: 0.9rem;
            text-align: center;
        }

        /* åº•éƒ¨ */
        .end-text {
            text-align: center;
            color: #999;
            margin: 40px 0;
            font-size: 0.8rem;
            cursor: pointer;
            user-select: none;
        }
    </style>
</head>
<body>

    <div class="gallery-container">
        <!-- è¿”å›æŒ‰é’® -->
        <a href="index.html" class="back-btn">â¬… è¿”å›é‚€è¯·å‡½</a>

        <!-- éšè—å½©è›‹è§¦å‘åŒºï¼šç‚¹å‡»æ ‡é¢˜5æ¬¡ -->
        <h1 id="secretTitle" style="text-align: center; color: #d32f2f; margin-bottom: 30px; cursor: pointer;">ğŸ‘¶ å±¹ç›æˆé•¿è®°å½•</h1>

        <!-- è§†é¢‘åŒºåŸŸ -->
        <div class="section-title">ğŸ¥ ç²¾å½©è§†é¢‘</div>
        <div class="video-container">
            <!-- è§†é¢‘1 -->
            <div class="video-wrapper">
                <video controls poster="babyimage/video_cover.jpg">
                    <source src="babyimage/video1.mp4" type="video/mp4">
                    æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾ã€‚
                </video>
                <div class="video-caption">ç¬¬ä¸€æ¬¡æŠ¬å¤´</div>
            </div>
        </div>

        <!-- ç…§ç‰‡åŒºåŸŸ -->
        <div class="section-title">ğŸ“¸ ç²¾å½©ç¬é—´</div>
        <div class="gallery-grid">
            
            <!-- ç¤ºä¾‹ï¼šæ™®é€šç…§ç‰‡ -->
            <div class="gallery-item">
                <a href="babyimage/1.jpg" data-fancybox="gallery" data-caption="å¯çˆ±çš„å®å®">
                    <img src="babyimage/1.jpg" alt="å®å®ç…§ç‰‡">
                </a>
            </div>

            <!-- ç¤ºä¾‹ï¼šæ¨¡æ‹Ÿå®å†µç…§ç‰‡ (Live Photo) -->
            <!-- å°†å®å†µçš„movæ–‡ä»¶ä½œä¸ºhrefï¼Œjpgä½œä¸ºå°é¢ -->
            <div class="gallery-item">
                <a href="babyimage/live1.mp4" data-fancybox="gallery" data-caption="å®å†µï¼šç¬¬ä¸€æ¬¡ç¬‘ (Live Photo)">
                    <img src="babyimage/live1.jpg" alt="å®å†µç…§ç‰‡å°é¢">
                    <span class="video-icon">â–¶</span>
                </a>
            </div>

            <!-- å›¾ç‰‡ 2 -->
            <div class="gallery-item">
                <a href="babyimage/2.jpg" data-fancybox="gallery" data-caption="ç¡è§‰è§‰">
                    <img src="babyimage/2.jpg" alt="å®å®ç…§ç‰‡">
                </a>
            </div>

            <!-- å›¾ç‰‡ 3 -->
            <div class="gallery-item">
                <a href="babyimage/3.jpg" data-fancybox="gallery" data-caption="ç¬‘ä¸€ä¸ª">
                    <img src="babyimage/3.jpg" alt="å®å®ç…§ç‰‡">
                </a>
            </div>

             <!-- å›¾ç‰‡ 4 -->
             <div class="gallery-item">
                <a href="babyimage/4.jpg" data-fancybox="gallery">
                    <img src="babyimage/4.jpg" alt="å®å®ç…§ç‰‡">
                </a>
            </div>

             <!-- å›¾ç‰‡ 5 -->
             <div class="gallery-item">
                <a href="babyimage/5.jpg" data-fancybox="gallery">
                    <img src="babyimage/5.jpg" alt="å®å®ç…§ç‰‡">
                </a>
            </div>

             <!-- å›¾ç‰‡ 6 -->
             <div class="gallery-item">
                <a href="babyimage/6.jpg" data-fancybox="gallery">
                    <img src="babyimage/6.jpg" alt="å®å®ç…§ç‰‡">
                </a>
            </div>
        </div>

        <!-- éšè—å½©è›‹è§¦å‘åŒº2ï¼šç‚¹å‡»åº•éƒ¨æ–‡å­—5æ¬¡ -->
        <div class="end-text" id="secretFooter">- æŒç»­æ›´æ–°ä¸­ -</div>
    </div>

    <!-- å¼•å…¥ Fancybox JS -->
    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>
    <script>
        // åˆå§‹åŒ–ç¯ç®±æ•ˆæœ
        Fancybox.bind("[data-fancybox]", {
            Toolbar: {
                display: {
                    left: ["infobar"],
                    middle: [],
                    right: ["close"],
                },
            },
        });

        // ------------------------------
        // éšè—ä¸Šä¼ åŠŸèƒ½å½©è›‹é€»è¾‘
        // ------------------------------
        
        // ä½ çš„åç«¯ä¸Šä¼ æ¥å£åœ°å€ (è¯·ä¿®æ”¹ä¸ºä½ å®é™…éƒ¨ç½² PHP çš„åœ°å€)
        const UPLOAD_API_URL = "https://upload.1101020.xyz/upload.php"; 

        let clickCount = 0;
        let clickTimer = null;
        
        // åˆ›å»ºä¸€ä¸ªéšè—çš„æ–‡ä»¶è¾“å…¥æ¡†
        const fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.accept = 'image/*,video/*'; // å…è®¸å›¾ç‰‡å’Œè§†é¢‘
        fileInput.style.display = 'none';
        document.body.appendChild(fileInput);

        // ç›‘å¬æ–‡ä»¶é€‰æ‹©
        fileInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;

            const formData = new FormData();
            formData.append('file', file);

            // æ˜¾ç¤ºç®€å•çš„åŠ è½½çŠ¶æ€
            const originalText = document.getElementById('secretTitle').innerText;
            document.getElementById('secretTitle').innerText = "â³ æ­£åœ¨ä¸Šä¼ ...";

            fetch(UPLOAD_API_URL, {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert("âœ… ä¸Šä¼ æˆåŠŸï¼è°¢è°¢æ‚¨çš„åˆ†äº«ï¼");
                } else {
                    alert("âŒ ä¸Šä¼ å¤±è´¥ï¼š" + (data.message || "æœªçŸ¥é”™è¯¯"));
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert("âŒ ä¸Šä¼ å‡ºé”™ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–è”ç³»ä¸¥å…ˆç”Ÿ");
            })
            .finally(() => {
                document.getElementById('secretTitle').innerText = originalText;
                fileInput.value = ''; // æ¸…ç©º
            });
        });

        function checkSecretTrigger() {
            clickCount++;
            
            // å¦‚æœ1ç§’å†…æ²¡æœ‰ç»§ç»­ç‚¹å‡»ï¼Œé‡ç½®è®¡æ•°
            if (clickTimer) clearTimeout(clickTimer);
            clickTimer = setTimeout(() => {
                clickCount = 0;
            }, 1000);

            // è¿ç»­ç‚¹å‡» 5 æ¬¡è§¦å‘
            if (clickCount >= 5) {
                const isUpload = confirm("ğŸ‰ å‘ç°éšè—åŠŸèƒ½ï¼\n\næ‚¨æƒ³è¦ç›´æ¥ä¸Šä¼ å®å®çš„ç…§ç‰‡æˆ–è§†é¢‘åˆ°æœåŠ¡å™¨å—ï¼Ÿ");
                if (isUpload) {
                    fileInput.click(); // è§¦å‘æ–‡ä»¶é€‰æ‹©
                }
                clickCount = 0; // é‡ç½®
            }
        }

        // ç»‘å®šç‚¹å‡»äº‹ä»¶åˆ°æ ‡é¢˜å’Œé¡µè„š
        document.getElementById('secretTitle').addEventListener('click', checkSecretTrigger);
        document.getElementById('secretFooter').addEventListener('click', checkSecretTrigger);

    </script>
</body>
</html>