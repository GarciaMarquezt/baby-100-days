<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é‚€è¯·å‡½ | å±¹ç›å°æœ‹å‹ç™¾æ—¥&ä¹”è¿å–œå®´</title>
    
    <!-- å­—ä½“ -->
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@300;700&display=swap" rel="stylesheet">
    <!-- åŠ¨ç”»åº“ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" />
    <!-- æœªæ¥æ„Ÿç‰¹æ•ˆåº“ -->
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    
    <!-- åŠ¨æ€åŠ è½½ CSS (è‡ªåŠ¨æ·»åŠ æ—¶é—´æˆ³ï¼Œå½»åº•è§£å†³å¾®ä¿¡ç¼“å­˜) -->
    <script>
        var ver = new Date().getTime();
        document.write('<link rel="stylesheet" href="style.css?v=' + ver + '">');
    </script>

    <style>
        /* å†…è”å…³é”®æ ·å¼ï¼Œé˜²æ­¢åŠ è½½é—ªçƒ */
        #loading {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #fff0f5; z-index: 9999; display: flex; justify-content: center; align-items: center;
            transition: opacity 0.5s;
        }
        .loading-circle {
            width: 50px; height: 50px; border: 3px solid #ff9a9e; border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite;
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <!-- åŠ è½½å± -->
    <div id="loading"><div class="loading-circle"></div></div>

    <!-- éŸ³ä¹æ§åˆ¶ -->
    <div class="music-control" id="musicBtn">
        <div class="bar-1"></div><div class="bar-2"></div><div class="bar-3"></div>
    </div>
    <audio id="bgm" loop src="https://music.163.com/song/media/outer/url?id=1860587682.mp3"></audio>

    <!-- åŠ¨æ€èƒŒæ™¯ç”»å¸ƒ -->
    <div id="particleCanvas"></div>

    <!-- ä¸»è¦å†…å®¹ -->
    <main class="scroll-container">
        
        <!-- ç¬¬ä¸€å±ï¼šè§†è§‰å†²å‡» -->
        <section class="hero-section">
            <div class="hero-bg" data-rellax-speed="-4"></div>
            
            <div class="hero-content">
                <!-- èƒŒæ™¯å¤§æ ‡é¢˜ -->
                <div class="hero-title-large">100 DAYS</div>
                
                <!-- å·¦ä¾§å†…å®¹åŒº -->
                <div class="hero-left">
                    <div class="vertical-text date" data-aos="fade-right" data-aos-delay="300">
                        <span>äºŒ</span><span>ã€‡</span><span>äºŒ</span><span>å…­</span> Â· <span>ä¸€</span><span>æœˆ</span> Â· <span>å</span><span>æ—¥</span>
                    </div>
                    
                    <!-- ç»Ÿè®¡ä¿¡æ¯ï¼ˆFIFAé£æ ¼ï¼‰ -->
                    <div class="hero-stats" data-aos="fade-up" data-aos-delay="600">
                        <div class="stat-item">
                            <div class="stat-number">100</div>
                            <div class="stat-label">Days</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">2026</div>
                            <div class="stat-label">Year</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">01.10</div>
                            <div class="stat-label">Date</div>
                        </div>
                    </div>
                </div>
                
                <!-- å³ä¾§ä¸»è§†è§‰åŒº -->
                <div class="hero-right">
                    <div class="main-visual" data-aos="zoom-in" data-aos-duration="1500">
                        <div class="image-mask">
                            <img src="https://upload.1101020.xyz/uploads/images/1.jpg" alt="Baby" class="hero-img" loading="eager" onerror="fixImagePath(this)">
                        </div>
                        <div class="floating-deco deco-1" data-rellax-speed="2"></div>
                        <div class="floating-deco deco-2" data-rellax-speed="-1"></div>
                    </div>

                    <div class="title-block" data-aos="fade-left" data-aos-delay="500">
                        <h2 class="sub">DOUBLE HAPPINESS</h2>
                        <h1 class="main">ç™¾æ—¥ & ä¹”è¿</h1>
                        <p class="names">å±¹ç›å°æœ‹å‹ Â· 100 DAYS</p>
                    </div>
                </div>
            </div>
            
            <div class="scroll-indicator">
                <span>SCROLL</span>
                <div class="line"></div>
            </div>
        </section>

        <!-- ç¬¬äºŒå±ï¼šæ‚å¿—é£æ’ç‰ˆ -->
        <section class="story-section">
            <div class="story-grid">
                <div class="text-box" data-aos="fade-right">
                    <h3>å®¶ä¸çˆ±<br>åŒæ—¶æŠµè¾¾</h3>
                    <p>è¿™æ˜¯å…³äºæˆé•¿çš„ç¬¬ä¸€ç™¾å¤©<br>ä¹Ÿæ˜¯å…³äºæ–°å®¶çš„ç¬¬ä¸€å¤©</p>
                    <div class="divider"></div>
                    <p class="small">
                        ç‘æ°”ç›ˆé—¨ï¼Œå–œè¿æ–°å±…<br>
                        éºŸå„¿ç™¾æ—¥ï¼Œç¦æ³½ç»µé•¿<br>
                        å¤‡è–„é…’ï¼Œè°¢äº²å‹<br>
                        å…±å™æ¸©æƒ…æ—¶å…‰
                    </p>
                </div>
                <div class="img-box" data-aos="fade-left">
                    <img src="https://upload.1101020.xyz/uploads/images/2.jpg" alt="Family" class="story-img" loading="lazy" onerror="fixImagePath(this)">
                    <div class="img-frame"></div>
                </div>
            </div>
        </section>

        <!-- ç¬¬ä¸‰å±ï¼š3Dé‚€è¯·å‡½ (æ—¶é—´åœ°ç‚¹) -->
        <section class="invite-section">
            <div class="card-3d-container" id="card3dContainer" data-aos="flip-up">
                <div class="card-3d">
                    <!-- æ­£é¢ -->
                    <div class="card-front">
                        <div class="stamp">INVITATION</div>
                        <h3>è¯šæŒšé‚€è¯·</h3>
                        <p class="host">ä¸¥è“¬æ˜¥ & ç”°æ¢¦ æ•¬é‚€</p>
                        <div class="tap-hint" onclick="flipCard(event)">ğŸ‘† ç‚¹å‡»ç¿»è½¬æŸ¥çœ‹è¯¦æƒ…</div>
                    </div>
                    <!-- èƒŒé¢ -->
                    <div class="card-back">
                        <div class="info-row">
                            <i class="icon">ğŸ“…</i>
                            <div>
                                <strong>2026.01.10</strong>
                                <span>å†œå†åä¸€æœˆå»¿äºŒ (å‘¨å…­)</span>
                            </div>
                        </div>
                        <div class="info-row">
                            <i class="icon">ğŸ“</i>
                            <div>
                                <strong>ç¥é˜³é‘«åˆ©å¤§é…’åº—</strong>
                                <span>å››æ¥¼ 1å·ä¼šè®®å…</span>
                            </div>
                        </div>
                        <button onclick="event.stopPropagation(); showMapMenu();" class="map-btn">å¼€å¯å¯¼èˆª</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- åº•éƒ¨æ‚¬æµ®å…¥å£ -->
        <div class="bottom-spacer"></div>
    </main>

    <!-- å¯¼èˆªé€‰æ‹©å¼¹çª— -->
    <div id="mapModal" class="map-modal" onclick="closeMapMenu()">
        <div class="map-menu" onclick="event.stopPropagation()">
            <div class="menu-title">è¯·é€‰æ‹©åœ°å›¾</div>
            <!-- 
                ç»çº¬åº¦ï¼šç¥é˜³é‘«åˆ©å¤§é…’åº—
                åŸºå‡†åæ ‡ (WGS84/GCJ-02): ç»åº¦ 111.883652, çº¬åº¦ 26.585436
                æ³¨æ„ï¼šä¸åŒåœ°å›¾ä½¿ç”¨ä¸åŒåæ ‡ç³»ç»Ÿå’Œæ ¼å¼
            -->
            <a href="#" id="baiduMapLink" target="_blank" class="menu-item">
                <span style="color:#d32f2f">ç™¾åº¦åœ°å›¾</span> (é€šç”¨)
            </a>
            <a href="#" id="gaodeMapLink" target="_blank" class="menu-item">
                <span style="color:#0091ff">é«˜å¾·åœ°å›¾</span> (æ¨è)
            </a>
            <a href="#" id="tencentMapLink" target="_blank" class="menu-item">
                <span style="color:#00c853">è…¾è®¯/ç½‘é¡µåœ°å›¾</span> (é€šç”¨)
            </a>
            <div class="menu-cancel" onclick="closeMapMenu()">å–æ¶ˆ</div>
        </div>
    </div>

    <!-- å…¨å±€æ‚¬æµ®æŒ‰é’® -->
    <a href="gallery.html" class="floating-album-btn">
        <div class="btn-content">
            <span class="icon">ğŸ‘¶</span>
            <span class="text">æˆé•¿ç›¸å†Œ</span>
        </div>
        <div class="btn-ripple"></div>
    </a>

    <!-- è„šæœ¬åº“ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/rellax/1.12.1/rellax.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    
    <script>
        // å›¾ç‰‡è·¯å¾„ä¿®å¤å‡½æ•°ï¼ˆè§£å†³å®å¡”é¢æ¿æ‰‹æœºç«¯è®¿é—®é—®é¢˜ï¼‰
        function fixImagePath(img) {
            if (!img) return;
            
            let originalSrc = img.getAttribute('data-original') || img.src || img.getAttribute('src');
            if (!originalSrc) return;
            
            // ç§»é™¤å¯èƒ½å­˜åœ¨çš„ @ ç¬¦å·ï¼ˆæŸäº›æƒ…å†µä¸‹å¯èƒ½è¢«æ·»åŠ ï¼‰
            originalSrc = originalSrc.replace(/^@+/, '').trim();
            
            // å›¾ç‰‡æœåŠ¡å™¨åŸŸåï¼ˆå®å¡”æœåŠ¡å™¨ï¼‰
            const IMAGE_SERVER = 'https://upload.1101020.xyz';
            
            // å°† babyimage è·¯å¾„è½¬æ¢ä¸º uploads/images è·¯å¾„
            let convertedSrc = originalSrc;
            if (convertedSrc.includes('babyimage/')) {
                convertedSrc = convertedSrc.replace(/babyimage\//g, 'uploads/images/');
            }
            
            // ä¿®å¤é”™è¯¯çš„åŸŸåï¼ˆwww.1101020.xyz -> upload.1101020.xyzï¼‰
            if (convertedSrc.includes('www.1101020.xyz')) {
                convertedSrc = convertedSrc.replace(/www\.1101020\.xyz/g, 'upload.1101020.xyz');
            }
            
            // æå–æ–‡ä»¶å
            let filename = convertedSrc;
            if (filename.includes('/')) {
                filename = filename.split('/').pop();
            }
            // ç§»é™¤æŸ¥è¯¢å‚æ•°
            if (filename.includes('?')) {
                filename = filename.split('?')[0];
            }
            // ç§»é™¤å¯èƒ½å­˜åœ¨çš„ @ ç¬¦å·
            filename = filename.replace(/^@+/, '').trim();
            
            // æ„å»ºæ­£ç¡®çš„å®Œæ•´è·¯å¾„ï¼ˆä½¿ç”¨å®å¡”æœåŠ¡å™¨åŸŸåï¼‰
            const correctPath = IMAGE_SERVER + '/uploads/images/' + filename;
            
            // å°è¯•å¤šç§è·¯å¾„æ ¼å¼ï¼ˆè§£å†³å®å¡”é¢æ¿è·¯å¾„é—®é¢˜ï¼‰
            const possiblePaths = [
                correctPath,  // æœ€ä¼˜å…ˆï¼šä½¿ç”¨æ­£ç¡®çš„æœåŠ¡å™¨åŸŸå
                IMAGE_SERVER + '/uploads/images/' + filename,  // ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„è·¯å¾„
                convertedSrc.startsWith('http') ? convertedSrc.replace(/www\.1101020\.xyz/g, 'upload.1101020.xyz') : convertedSrc,  // ä¿®å¤åŸŸå
                originalSrc.startsWith('http') ? originalSrc.replace(/www\.1101020\.xyz/g, 'upload.1101020.xyz') : originalSrc,  // ä¿®å¤åŸå§‹è·¯å¾„çš„åŸŸå
                './uploads/images/' + filename,  // ç›¸å¯¹è·¯å¾„
                '/uploads/images/' + filename,  // ç»å¯¹è·¯å¾„
            ];
            
            // å»é‡
            const uniquePaths = [...new Set(possiblePaths)];
            
            let currentIndex = 0;
            const tryNextPath = () => {
                if (currentIndex >= uniquePaths.length) {
                    console.warn('æ— æ³•åŠ è½½å›¾ç‰‡:', originalSrc);
                    return;
                }
                
                const testPath = uniquePaths[currentIndex];
                const testImg = new Image();
                
                testImg.onload = () => {
                    // ç¡®ä¿æœ€ç»ˆè·¯å¾„æ²¡æœ‰ @ ç¬¦å·
                    const finalPath = testPath.replace(/^@+/, '').trim();
                    img.src = finalPath;
                    img.onerror = null; // æˆåŠŸåæ¸…é™¤é”™è¯¯å¤„ç†
                    console.log('å›¾ç‰‡åŠ è½½æˆåŠŸ:', finalPath);
                };
                
                testImg.onerror = () => {
                    currentIndex++;
                    tryNextPath();
                };
                
                // æ·»åŠ æ—¶é—´æˆ³é˜²æ­¢ç¼“å­˜
                testImg.src = testPath + (testPath.includes('?') ? '&' : '?') + 't=' + Date.now();
            };
            
            tryNextPath();
        }
        
        // 3Då¡ç‰‡ç¿»è½¬å‡½æ•°
        function flipCard(event) {
            // å¦‚æœä¼ å…¥äº†äº‹ä»¶å¯¹è±¡ï¼Œé˜»æ­¢å†’æ³¡
            if (event) {
                event.stopPropagation();
            }
            
            const container = document.getElementById('card3dContainer');
            if (container) {
                container.classList.toggle('flipped');
                console.log('å¡ç‰‡ç¿»è½¬ï¼Œå½“å‰çŠ¶æ€:', container.classList.contains('flipped') ? 'å·²ç¿»è½¬' : 'æ­£é¢');
            }
        }
        
        // é¡µé¢åŠ è½½
        window.onload = function() {
            // ç”Ÿæˆåœ°å›¾é“¾æ¥ï¼ˆä½¿ç”¨æ­£ç¡®çš„åæ ‡ï¼‰
            generateMapLinks();
            
            // ä¿®å¤æ‰€æœ‰å›¾ç‰‡è·¯å¾„ï¼ˆåŒ…æ‹¬ uploads è·¯å¾„ï¼‰
            document.querySelectorAll('img').forEach(img => {
                const src = img.src || img.getAttribute('src');
                if (src && (src.includes('babyimage') || src.includes('uploads'))) {
                    img.setAttribute('data-original', src);
                    img.onerror = function() {
                        fixImagePath(this);
                    };
                    // é¢„åŠ è½½æ£€æŸ¥
                    if (!img.complete) {
                        fixImagePath(img);
                    }
                }
            });
            
            // ä¸º3Då¡ç‰‡æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼ˆç‚¹å‡»æ•´ä¸ªå¡ç‰‡ä¹Ÿå¯ä»¥ç¿»è½¬ï¼‰
            const cardContainer = document.getElementById('card3dContainer');
            if (cardContainer) {
                cardContainer.addEventListener('click', function(e) {
                    // å¦‚æœç‚¹å‡»çš„æ˜¯æŒ‰é’®ã€é“¾æ¥æˆ–å…¶ä»–äº¤äº’å…ƒç´ ï¼Œä¸è§¦å‘ç¿»è½¬
                    if (e.target.tagName === 'BUTTON' || 
                        e.target.tagName === 'A' || 
                        e.target.closest('button') || 
                        e.target.closest('a') ||
                        e.target.classList.contains('tap-hint')) {
                        return;
                    }
                    flipCard(e);
                });
                console.log('3Då¡ç‰‡ç‚¹å‡»äº‹ä»¶å·²ç»‘å®š');
            }
            
            // ä¸ºå¡ç‰‡èƒŒé¢çš„æ‰€æœ‰æŒ‰é’®å’Œé“¾æ¥æ·»åŠ äº‹ä»¶é˜»æ­¢å†’æ³¡
            const cardBack = document.querySelector('.card-back');
            if (cardBack) {
                const interactiveElements = cardBack.querySelectorAll('button, a, .map-btn');
                interactiveElements.forEach(el => {
                    el.addEventListener('click', function(e) {
                        e.stopPropagation();
                    });
                });
            }
            
            document.getElementById('loading').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('loading').style.display = 'none';
                // åˆå§‹åŒ–è§†å·®
                var rellax = new Rellax('.floating-deco, .hero-bg');
                // åˆå§‹åŒ–åŠ¨ç”»
                AOS.init({
                    offset: 50,
                    duration: 1000,
                    once: false,
                    mirror: true
                });
            }, 500);
        };

        // éŸ³ä¹æ§åˆ¶
        const bgm = document.getElementById('bgm');
        const musicBtn = document.getElementById('musicBtn');
        let isPlaying = false;

        document.body.addEventListener('click', () => {
            if(!isPlaying) {
                bgm.play();
                musicBtn.classList.add('playing');
                isPlaying = true;
            }
        }, {once:true});

        musicBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            if(isPlaying) {
                bgm.pause();
                musicBtn.classList.remove('playing');
            } else {
                bgm.play();
                musicBtn.classList.add('playing');
            }
            isPlaying = !isPlaying;
        });

        // æœªæ¥æ„Ÿç²’å­ç‰¹æ•ˆ
        function initParticleEffect() {
            // å¦‚æœparticles.jså¯ç”¨ï¼Œä½¿ç”¨å®ƒï¼›å¦åˆ™ä½¿ç”¨canvasé™çº§æ–¹æ¡ˆ
            const container = document.getElementById('particleCanvas');
            if (!container) return;
            
            if (typeof particlesJS !== 'undefined') {
                particlesJS('particleCanvas', {
                    particles: {
                        number: { value: 80, density: { enable: true, value_area: 800 } },
                        color: { value: ['#ff9a9e', '#fad0c4', '#a18cd1', '#fbc2eb'] },
                        shape: { type: 'circle' },
                        opacity: { value: 0.4, random: true, anim: { enable: true, speed: 1, opacity_min: 0.1, sync: false } },
                        size: { value: 4, random: true, anim: { enable: true, speed: 2, size_min: 0.1, sync: false } },
                        line_linked: { enable: true, distance: 150, color: '#ffffff', opacity: 0.2, width: 1 },
                        move: { enable: true, speed: 1.5, direction: 'none', random: false, straight: false, out_mode: 'out', bounce: false, attract: { enable: false, rotateX: 600, rotateY: 1200 } }
                    },
                    interactivity: {
                        detect_on: 'canvas',
                        events: { onhover: { enable: true, mode: 'bubble' }, onclick: { enable: true, mode: 'push' }, resize: true },
                        modes: { grab: { distance: 400, line_linked: { opacity: 1 } }, bubble: { distance: 250, size: 6, duration: 2, opacity: 0.8, speed: 3 }, repulse: { distance: 200, duration: 0.4 }, push: { particles_nb: 4 }, remove: { particles_nb: 2 } }
                    },
                    retina_detect: true
                });
            } else {
                // é™çº§æ–¹æ¡ˆï¼šä½¿ç”¨Canvasç²’å­
                const canvas = document.createElement('canvas');
                canvas.id = 'particleCanvas';
                canvas.style.position = 'fixed';
                canvas.style.top = '0';
                canvas.style.left = '0';
                canvas.style.width = '100%';
                canvas.style.height = '100%';
                canvas.style.zIndex = '0';
                canvas.style.pointerEvents = 'none';
                container.appendChild(canvas);
                
                const ctx = canvas.getContext('2d');
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                
                const particles = [];
                class Particle {
                    constructor() {
                        this.x = Math.random() * canvas.width;
                        this.y = Math.random() * canvas.height;
                        this.size = Math.random() * 3 + 1;
                        this.speedX = (Math.random() - 0.5) * 1;
                        this.speedY = (Math.random() - 0.5) * 1;
                        this.color = `rgba(255, 182, 193, ${Math.random() * 0.5 + 0.2})`;
                    }
                    update() {
                        this.y += this.speedY;
                        this.x += this.speedX;
                        if(this.y > canvas.height) this.y = 0;
                        if(this.y < 0) this.y = canvas.height;
                        if(this.x > canvas.width) this.x = 0;
                        if(this.x < 0) this.x = canvas.width;
                    }
                    draw() {
                        ctx.fillStyle = this.color;
                        ctx.beginPath();
                        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                        ctx.fill();
                    }
                }
                
                for(let i=0; i<60; i++) particles.push(new Particle());
                
                function animate() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    particles.forEach(p => { p.update(); p.draw(); });
                    requestAnimationFrame(animate);
                }
                animate();
            }
        }
        
        // é¡µé¢åŠ è½½ååˆå§‹åŒ–ç²’å­
        window.addEventListener('load', function() {
            setTimeout(initParticleEffect, 300);
        });
        
        // çª—å£å¤§å°æ”¹å˜æ—¶é‡æ–°åˆå§‹åŒ–
        window.addEventListener('resize', function() {
            const container = document.getElementById('particleCanvas');
            const canvas = container.querySelector('canvas');
            if (canvas) {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
        });

        // åœ°å›¾åæ ‡é…ç½®ï¼ˆç¥é˜³é‘«åˆ©å¤§é…’åº—ï¼‰
        // åŸºå‡†åæ ‡ï¼šWGS84/GCJ-02 ç»åº¦,çº¬åº¦
        const BASE_LONGITUDE = 111.836;  // ç»åº¦
        const BASE_LATITUDE = 26.5755;    // çº¬åº¦
        const LOCATION_NAME = 'ç¥é˜³é‘«åˆ©å¤§é…’åº—';
        const LOCATION_ADDRESS = 'å››æ¥¼1å·ä¼šè®®å…';

        // åæ ‡è½¬æ¢å‡½æ•°ï¼šGCJ-02 è½¬ BD-09ï¼ˆç™¾åº¦åœ°å›¾ä½¿ç”¨ï¼‰
        // ä½¿ç”¨æ ‡å‡†çš„åæ ‡è½¬æ¢ç®—æ³•
        function gcj02ToBd09(lng, lat) {
            const x_PI = 3.14159265358979324 * 3000.0 / 180.0;
            const PI = 3.1415926535897932384626;
            
            // å°†ç»çº¬åº¦è½¬æ¢ä¸ºå¼§åº¦
            let z = Math.sqrt(lng * lng + lat * lat) + 0.00002 * Math.sin(lat * x_PI);
            let theta = Math.atan2(lat, lng) + 0.000003 * Math.cos(lng * x_PI);
            
            // è½¬æ¢ä¸ºç™¾åº¦åæ ‡
            let bd_lng = z * Math.cos(theta) + 0.0065;
            let bd_lat = z * Math.sin(theta) + 0.006;
            
            return { 
                lng: parseFloat(bd_lng.toFixed(6)), 
                lat: parseFloat(bd_lat.toFixed(6)) 
            };
        }

        // ç”Ÿæˆåœ°å›¾é“¾æ¥
        function generateMapLinks() {
            // ç™¾åº¦åœ°å›¾ï¼šä½¿ç”¨ BD-09 åæ ‡ï¼Œæ ¼å¼ï¼šçº¬åº¦,ç»åº¦
            const bd09 = gcj02ToBd09(BASE_LONGITUDE, BASE_LATITUDE);
            const baiduUrl = `http://api.map.baidu.com/marker?location=${bd09.lat},${bd09.lng}&title=${encodeURIComponent(LOCATION_NAME)}&content=${encodeURIComponent(LOCATION_ADDRESS)}&output=html&src=webapp.baidu.openAPIdemo`;
            document.getElementById('baiduMapLink').href = baiduUrl;
            console.log('ç™¾åº¦åœ°å›¾åæ ‡ (BD-09):', bd09.lat, ',', bd09.lng);

            // é«˜å¾·åœ°å›¾ï¼šä½¿ç”¨ GCJ-02 åæ ‡ï¼Œæ ¼å¼ï¼šç»åº¦,çº¬åº¦
            const gaodeUrl = `https://uri.amap.com/marker?position=${BASE_LONGITUDE},${BASE_LATITUDE}&name=${encodeURIComponent(LOCATION_NAME)}&src=invitation&coordinate=gaode&callnative=1`;
            document.getElementById('gaodeMapLink').href = gaodeUrl;
            console.log('é«˜å¾·åœ°å›¾åæ ‡ (GCJ-02):', BASE_LONGITUDE, ',', BASE_LATITUDE);

            // è…¾è®¯åœ°å›¾ï¼šä½¿ç”¨ GCJ-02 åæ ‡ï¼Œæ ¼å¼ï¼šçº¬åº¦,ç»åº¦
            const tencentUrl = `https://apis.map.qq.com/uri/v1/marker?marker=coord:${BASE_LATITUDE},${BASE_LONGITUDE};title:${encodeURIComponent(LOCATION_NAME)};addr:${encodeURIComponent(LOCATION_ADDRESS)}`;
            document.getElementById('tencentMapLink').href = tencentUrl;
            console.log('è…¾è®¯åœ°å›¾åæ ‡ (GCJ-02):', BASE_LATITUDE, ',', BASE_LONGITUDE);
        }


        // åœ°å›¾èœå•æ§åˆ¶
        function showMapMenu() {
            document.getElementById('mapModal').classList.add('active');
        }
        function closeMapMenu() {
            document.getElementById('mapModal').classList.remove('active');
        }
    </script>
</body>
</html>